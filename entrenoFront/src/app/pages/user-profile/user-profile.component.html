<div class="profile-container">
    <div class="profile-card" *ngIf="user; else errorTemplate">
      <h2 class="welcome-message">Usuario: {{ user.username }}</h2>
      <h3 class="role">Rol: {{ user.tipoUsuario?.nombre || 'No proporcionado' }}</h3>
  
      <div class="user-info">
        <p><strong>Email: </strong> {{ user.email || 'No proporcionado' }}</p>
        <p><strong>Tel√©fono 1: </strong> {{ user.telefono1 || 'No proporcionado' }}</p>
        <p><strong>Tel√©fono 2: </strong> {{ user.telefono2 || 'No proporcionado' }}</p>
  
        <!-- üîπ Solo los administradores ven estos datos -->
        <div *ngIf="isAdmin">
          <p><strong>N√∫mero de usuario: </strong> {{ user.id }}</p>
          <p><strong>Fecha de Registro: </strong> 
            {{ user.fechaRegistro ? (user.fechaRegistro | date: 'dd/MM/yyyy HH:mm:ss') : 'No proporcionado' }}
          </p>
          <p><strong>√öltima Conexi√≥n: </strong> 
            {{ user.ultimaConexion ? (user.ultimaConexion | date: 'dd/MM/yyyy HH:mm:ss') : 'No proporcionado' }}
          </p>
        </div>
  
        <!-- Contrase√±a con opci√≥n de mostrar/ocultar -->
        <p><strong>Contrase√±a: </strong> 
          <span>{{ passwordVisible ? user.password : '*******' }}</span>
          <button (click)="togglePasswordVisibility()" class="toggle-password">
            {{ passwordVisible ? 'üôà' : 'üëÅÔ∏è' }}
          </button>
        </p>
      </div>
  
      <!-- üîπ Bot√≥n para modificar informaci√≥n -->
      <button (click)="toggleEditForm()" class="edit-btn">Modificar Informaci√≥n</button>
  
      <!-- üîπ Formulario de edici√≥n (se muestra al hacer clic) -->
      <div *ngIf="isEditing" class="edit-form">
        <h3>Modificar Informaci√≥n</h3>
        
        <!-- üîπ Campo de contrase√±a con confirmaci√≥n -->
        <label for="newPassword">Nueva Contrase√±a:</label>
        <div class="password-container">
          <input id="newPassword" [type]="passwordVisible ? 'text' : 'password'" [(ngModel)]="editData.password" />
          <button type="button" class="toggle-password" (click)="togglePasswordVisibility()">
            {{ passwordVisible ? 'üôà' : 'üëÅÔ∏è' }}
          </button>
        </div>

        <label for="confirmPassword">Confirmar Contrase√±a:</label>
        <div class="password-container">
          <input id="confirmPassword" [type]="passwordVisible ? 'text' : 'password'" [(ngModel)]="confirmPassword" />
        </div>
        <p *ngIf="passwordsNoCoinciden" class="error">Las contrase√±as no coinciden</p>

        <!-- üîπ Solo los administradores pueden modificar estos datos -->
        <div *ngIf="isAdmin">
          <label for="editEmail">Email:</label>
          <input id="editEmail" type="text" [(ngModel)]="editData.email" />

          <label for="editTelefono1">Tel√©fono 1:</label>
          <input id="editTelefono1" type="text" [(ngModel)]="editData.telefono1" />

          <label for="editTelefono2">Tel√©fono 2:</label>
          <input id="editTelefono2" type="text" [(ngModel)]="editData.telefono2" />
        </div>

        <button (click)="updateUser()" [disabled]="passwordsNoCoinciden" class="save-btn">Guardar Cambios</button>
        <button (click)="toggleEditForm()" class="cancel-btn">Cancelar</button>
      </div> 
      
    </div>
  
    <!-- Mensaje de error si no se pudo cargar la informaci√≥n -->
    <ng-template #errorTemplate>
      <div class="error-message">
        <p>{{ errorMessage }}</p>
      </div>
    </ng-template>
  </div>
