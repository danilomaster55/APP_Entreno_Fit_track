<div class="crear-entrenamiento-card">
  <div class="card-seleccion">
  <div class="seleccion-layout">
    
    <!-- IZQUIERDA: Secciones del entrenamiento -->
    <div class="seccion-izquierda">
      <!-- Calentamiento -->
      <div class="seccion-entrenamiento">
        <div class="titulo-con-boton">
          <h3>Calentamiento</h3>
          <button (click)="abrirSelector('calentamiento')">â• AÃ±adir ejercicio</button>
        </div>

        <div class="lista-mini-cards">
          <div class="ejercicio-controlado" *ngFor="let ejercicio of calentamiento; let i = index">
          <app-ejercicio-mini-card [ejercicio]="ejercicio"></app-ejercicio-mini-card>
          <div class="controles-ejercicio">
            <button (click)="eliminarEjercicio('calentamiento', i)">ğŸ—‘</button>
          </div>
        </div>

        </div>
      </div>

      <!-- Entrenamiento principal -->
      <div class="seccion-entrenamiento">       
        <div class="titulo-con-boton">
          <h3>Entrenamiento principal</h3>
          <button (click)="abrirSelector('principal')">â• AÃ±adir ejercicio</button>
        </div>

        <div class="lista-mini-cards">         
          <div class="ejercicio-controlado" *ngFor="let ejercicio of principal; let i = index">
            <app-ejercicio-mini-card [ejercicio]="ejercicio"></app-ejercicio-mini-card>
            <div class="controles-ejercicio">
              <button (click)="eliminarEjercicio('principal', i)">ğŸ—‘</button>
            </div>
          </div>

        </div>
      </div>

      <!-- Vuelta a la calma -->
      <div class="seccion-entrenamiento">
        <div class="titulo-con-boton">
          <h3>Vuelta a la calma</h3>
          <button (click)="abrirSelector('calma')">â• AÃ±adir ejercicio</button>
        </div>

        <div class="lista-mini-cards">         
          <div class="ejercicio-controlado" *ngFor="let ejercicio of calma; let i = index">
          <app-ejercicio-mini-card [ejercicio]="ejercicio"></app-ejercicio-mini-card>
          <div class="controles-ejercicio">
            <button (click)="eliminarEjercicio('calma', i)">ğŸ—‘</button>
          </div>
        </div>

        </div>
      </div>
    </div>

    <!-- DERECHA: Selector fijo -->
    <div class="seccion-derecha">
      
      <p *ngIf="!seccionActual">Haz clic en "AÃ±adir ejercicio" en una secciÃ³n para empezar.</p>
      <app-ejercicios-selector
        *ngIf="seccionActual"
        (ejercicioSeleccionado)="agregarEjercicio($event)">
      </app-ejercicios-selector>
    </div>
  </div>
</div>


<div class="resumen-layout">
  <!-- ğŸ“ Zona de entrada del usuario -->
  <div class="zona-entrada">
    <h3>Datos del entrenamiento</h3>

    <label for="nombreEntrenamiento">Nombre:</label>
    <input
      id="nombreEntrenamiento"
      type="text"
      [(ngModel)]="nombreEntrenamiento"
      placeholder="Introduce un nombre"
    />

    <label for="descripcionEntrenamiento">DescripciÃ³n:</label>
    <textarea
      id="descripcionEntrenamiento"
      [(ngModel)]="descripcionEntrenamiento"
      placeholder="Breve descripciÃ³n..."
      rows="3">
    </textarea>

    <label for="intensidad">Intensidad:</label>
    <select [(ngModel)]="intensidadSeleccionada" id="intensidad">
      <option value="">Selecciona una intensidad</option>
      <option *ngFor="let i of intensidades" [ngValue]="i">{{ i.nombre }}</option>
    </select>
        <!-- Guardar entrenamiento -->
    <button 
      (click)="guardarEntrenamiento()" 
      [disabled]="!puedeGuardar"
      class="guardar-btn">
      ğŸ’¾ Guardar entrenamiento
    </button>

    <!-- Descargar o imprimir PDF -->
    <button 
      (click)="descargarPDF()" 
      [disabled]="!puedeGuardar"
      class="imprimir-btn">
      ğŸ–¨ Imprimir / Descargar PDF
    </button>
    <p *ngIf="!puedeGuardar" class="mensaje-aviso">
      âš ï¸ Debes completar todos los campos: nombre del entrenamiento, intensidad seleccionada, y al menos un ejercicio en cada secciÃ³n.
    </p>
  </div>

  <div id="resumen-entrenamiento" class="zona-vista-previa">
  <!-- ğŸ”¹ Cabecera con tÃ­tulo, usuario y fecha -->
  <div class="cabecera-pdf">
    <h2>{{ nombreEntrenamiento || 'Entrenamiento personalizado' }}</h2>
    <p><strong>Creado por:</strong> {{ usuarioService.getUsuario()?.username || 'Desconocido' }}</p>
    <p><strong>Fecha:</strong> {{ hoy | date: 'dd/MM/yyyy' }}</p>
  </div>

  <!-- ğŸ”¹ DescripciÃ³n general -->
  <div class="descripcion-pdf">
    <p><strong>DescripciÃ³n:</strong> {{ descripcionEntrenamiento || 'Sin descripciÃ³n.' }}</p>
    <p><strong>Intensidad:</strong> {{ intensidadSeleccionada?.nombre || 'No especificada' }}</p>
    <p><strong>Descanso entre ejercicios:</strong> {{ intensidadSeleccionada?.segundosDescanso }} segundos</p>
    <p><strong>DuraciÃ³n estimada:</strong> {{ duracionCalculada }} minutos</p>
    <p><strong>Grupos musculares trabajados:</strong> {{ gruposMusculares.join(', ') }}</p>
  </div>

  <!-- ğŸ”¹ SecciÃ³n de ejercicios -->
  <div class="seccion-ejercicios">
   <!-- ğŸ”¶ Calentamiento -->
<h3>ğŸŸ  Calentamiento</h3>
<div class="cards-container">
  <app-ejercicio-mini-card *ngFor="let ej of calentamiento" [ejercicio]="ej"></app-ejercicio-mini-card>
</div>

<!-- ğŸ”´ Entrenamiento Principal -->
<h3>ğŸ”´ Entrenamiento Principal</h3>
<p>Realizar {{ intensidadSeleccionada?.nombre?.toLowerCase() === 'alta' ? '4' : '2' }} veces</p>
<div class="cards-container">
  <app-ejercicio-mini-card *ngFor="let ej of principal" [ejercicio]="ej"></app-ejercicio-mini-card>
</div>

<!-- ğŸŸ¢ Vuelta a la Calma -->
<h3>ğŸŸ¢ Vuelta a la Calma</h3>
<div class="cards-container">
  <app-ejercicio-mini-card *ngFor="let ej of calma" [ejercicio]="ej"></app-ejercicio-mini-card>
</div>

  <!-- ğŸ”¹ Pie con logo -->
  <div class="pie-logo">
    <img src="assets/images/favicon.ico" alt="Logo" height="50" />
    <p>Generado con la app <strong>FitTrack</strong></p>
  </div>
</div>

</div>





</div>
